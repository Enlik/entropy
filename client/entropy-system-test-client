import sys
sys.path.insert(0,'../libraries')
from entropy import RepositorySocketClientInterface, EntropyRepositorySocketClientCommands, EquoInterface
from entropyConstants import *
repository = 'sabayonlinux.org'
Entropy = EquoInterface()
dburl = etpRepositories[repository]['plain_database'].split("/")[2]
port = etpRepositories[repository]['service_port']

eapi3_socket = RepositorySocketClientInterface(Entropy, EntropyRepositorySocketClientCommands)
eapi3_socket.connect(dburl, port)

username = 'lxnay'
password = 'password'
session_id = eapi3_socket.open_session()
print "logged in?",eapi3_socket.CmdInterface.service_login(username, password, session_id)
print "logging out...",eapi3_socket.CmdInterface.service_logout(username, session_id)
eapi3_socket.close_session(session_id)
