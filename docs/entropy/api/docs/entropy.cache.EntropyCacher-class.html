<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>entropy.cache.EntropyCacher</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="entropy-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.sabayon.org/">Entropy Framework</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="entropy-module.html">Package&nbsp;entropy</a> ::
        <a href="entropy.cache-module.html">Module&nbsp;cache</a> ::
        Class&nbsp;EntropyCacher
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class EntropyCacher</h1><p class="nomargin-top"><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_entropy_" name="uml_class_diagram_for_entropy_">
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#CACHE_IDS" title="entropy.cache.EntropyCacher.CACHE_IDS" alt="" coords="17,127,364,145"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#WRITEBACK_TIMEOUT" title="Entropy asynchronous and synchronous cache writer and reader." alt="" coords="17,145,364,164"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#__singleton__" title="entropy.cache.EntropyCacher.__singleton__" alt="" coords="17,164,364,183"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#init_singleton" title="Singleton overloaded method." alt="" coords="17,185,364,204"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#__enter__" title="When used with the with statement, pause cacher on&#45;disk writes." alt="" coords="17,204,364,223"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#__exit__" title="When used with the with statement, pause cacher on&#45;disk writes." alt="" coords="17,223,364,241"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#__del__" title="entropy.cache.EntropyCacher.__del__" alt="" coords="17,241,364,260"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#start" title="This is the method used to start the asynchronous cache writer but also the whole cacher." alt="" coords="17,260,364,279"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#is_started" title="Return whether start is called or not." alt="" coords="17,279,364,297"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#stop" title="This method stops the execution of the cacher, which won&#39;t accept cache &#160;writes anymore." alt="" coords="17,297,364,316"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#sync" title="This method can be called anytime and forces the instance to flush all the &#160;cache writes queued to disk." alt="" coords="17,316,364,335"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#discard" title="This method makes buffered cache to be discarded synchronously." alt="" coords="17,335,364,353"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#push" title="This is the place where data is either added to the write queue or written &#160;to disk (if async == False) only and only if start() method has been &#160;called." alt="" coords="17,353,364,372"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#pop" title="This is the place where data is retrieved from cache." alt="" coords="17,372,364,391"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#clear_cache_item" title="Clear Entropy Cache item from on&#45;disk cache." alt="" coords="17,391,364,409"/>
<area shape="rect" id="node0" href="entropy.cache.EntropyCacher-class.html#clear_cache" title="Clear all the on&#45;disk cache items included in EntropyCacher.CACHE_IDS." alt="" coords="17,409,364,428"/>
<area shape="rect" id="node1" href="entropy.cache.EntropyCacher-class.html" title="entropy.cache.EntropyCacher" alt="" coords="5,102,376,434"/>
<area shape="rect" id="node1" href="entropy.core.Singleton-class.html#__new__" title="entropy.core.Singleton.__new__" alt="" coords="92,39,289,57"/>
<area shape="rect" id="node1" href="entropy.core.Singleton-class.html#__init__" title="This is a fake method, necessary for Python 3." alt="" coords="92,57,289,76"/>
<area shape="rect" id="node2" href="entropy.core.Singleton-class.html" title="If your class wants to become a sexy Singleton, subclass this and replace __init__ with init_singleton." alt="" coords="80,6,301,82"/>
</map>
  <img src="uml_class_diagram_for_entropy_.gif" alt='' usemap="#uml_class_diagram_for_entropy_" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Instance Methods</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#init_singleton" class="summary-sig-name">init_singleton</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Singleton overloaded method.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.init_singleton">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__enter__"></a><span class="summary-sig-name">__enter__</span>(<span class="summary-sig-arg">self</span>)</span><br />
      When used with the with statement, pause cacher on-disk writes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.__enter__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__exit__"></a><span class="summary-sig-name">__exit__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">exc_type</span>,
        <span class="summary-sig-arg">exc_value</span>,
        <span class="summary-sig-arg">traceback</span>)</span><br />
      When used with the with statement, pause cacher on-disk writes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.__exit__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__del__"></a><span class="summary-sig-name">__del__</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.__del__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#start" class="summary-sig-name">start</a>(<span class="summary-sig-arg">self</span>)</span><br />
      This is the method used to start the asynchronous cache writer but 
      also the whole cacher.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.start">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#is_started" class="summary-sig-name">is_started</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Return whether start is called or not.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.is_started">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#stop" class="summary-sig-name">stop</a>(<span class="summary-sig-arg">self</span>)</span><br />
      This method stops the execution of the cacher, which won't accept 
      cache writes anymore.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.stop">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#sync" class="summary-sig-name">sync</a>(<span class="summary-sig-arg">self</span>)</span><br />
      This method can be called anytime and forces the instance to flush 
      all the cache writes queued to disk.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.sync">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#discard" class="summary-sig-name">discard</a>(<span class="summary-sig-arg">self</span>)</span><br />
      This method makes buffered cache to be discarded synchronously.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.discard">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">None</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#push" class="summary-sig-name">push</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">key</span>,
        <span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">async</span>=<span class="summary-sig-default">True</span>,
        <span class="summary-sig-arg">cache_dir</span>=<span class="summary-sig-default">None</span>)</span><br />
      This is the place where data is either added to the write queue or 
      written to disk (if async == False) only and only if start() method 
      has been called.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.push">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">Python object</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#pop" class="summary-sig-name">pop</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">key</span>,
        <span class="summary-sig-arg">cache_dir</span>=<span class="summary-sig-default">None</span>)</span><br />
      This is the place where data is retrieved from cache.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.pop">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="entropy.core.Singleton-class.html">core.Singleton</a></code></b>:
      <code><a href="entropy.core.Singleton-class.html#__init__">__init__</a></code>
      </p>
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== STATIC METHODS ==================== -->
<a name="section-StaticMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Static Methods</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#clear_cache_item" class="summary-sig-name">clear_cache_item</a>(<span class="summary-sig-arg">cache_item</span>,
        <span class="summary-sig-arg">cache_dir</span>=<span class="summary-sig-default">None</span>)</span><br />
      Clear Entropy Cache item from on-disk cache.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.clear_cache_item">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="entropy.cache.EntropyCacher-class.html#clear_cache" class="summary-sig-name">clear_cache</a>(<span class="summary-sig-arg">excluded_items</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">cache_dir</span>=<span class="summary-sig-default">None</span>)</span><br />
      Clear all the on-disk cache items included in 
      EntropyCacher.CACHE_IDS.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.clear_cache">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code><a href="entropy.core.Singleton-class.html">core.Singleton</a></code></b>:
      <code><a href="entropy.core.Singleton-class.html#__new__">__new__</a></code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Class Variables</span></td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="entropy.cache.EntropyCacher-class.html#CACHE_IDS" class="summary-name">CACHE_IDS</a> = <code title="{'atom_match': 'atom_match/atom_match_',
 'check_package_update': 'check_update/package_update_',
 'critical_update': 'critical_update/critical_cache_',
 'db_match': 'match/db',
 'dep_tree': 'deptree/dep_tree_',
 'depends_tree': 'depends/depends_tree_',
 'filter_satisfied_deps': 'depfilter/filter_satisfied_deps_',
 'library_breakage': 'libs_break/library_breakage_',
..."><code class="variable-group">{</code><code class="variable-quote">'</code><code class="variable-string">atom_match</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">atom_match/atom_match_</code><code class="variable-quote">'</code><code class="variable-op">, </code><code class="variable-quote">'</code><code class="variable-string">check_pa</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="entropy.cache.EntropyCacher-class.html#WRITEBACK_TIMEOUT" class="summary-name">WRITEBACK_TIMEOUT</a> = <code title="5">5</code><br />
      Entropy asynchronous and synchronous cache writer and reader.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__singleton__"></a><span class="summary-name">__singleton__</span> = <code title="&lt;entropy.cache.EntropyCacher object at 0x10df210&gt;">&lt;entropy.cache.EntropyCacher object at 0x10df210&gt;</code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Properties</span></td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Method Details</span></td>
</tr>
</table>
<a name="init_singleton"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">init_singleton</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.init_singleton">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Singleton overloaded method. Equals to __init__. This is the place 
  where all the properties initialization takes place.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="start"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">start</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.start">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This is the method used to start the asynchronous cache writer but 
  also the whole cacher. If this method is not called, the instance will 
  always trash and cache write request.</p>
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>None</dd>
  </dl>
</td></tr></table>
</div>
<a name="is_started"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">is_started</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.is_started">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Return whether start is called or not. This equals to checking if the 
  cacher is running, thus is writing cache to disk.</p>
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>None</dd>
  </dl>
</td></tr></table>
</div>
<a name="stop"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">stop</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.stop">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method stops the execution of the cacher, which won't accept 
  cache writes anymore. The thread responsible of writing to disk is 
  stopped here and the Cacher will be back to being inactive. A watchdog 
  will avoid the thread to freeze the call if the write buffer is 
  overloaded.</p>
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>None</dd>
  </dl>
</td></tr></table>
</div>
<a name="sync"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">sync</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.sync">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method can be called anytime and forces the instance to flush all
  the cache writes queued to disk. If wait == False a watchdog prevents 
  this call to get stuck in case of write buffer overloads.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="discard"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">discard</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.discard">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This method makes buffered cache to be discarded synchronously.</p>
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>None</dd>
  </dl>
</td></tr></table>
</div>
<a name="push"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">push</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">key</span>,
        <span class="sig-arg">data</span>,
        <span class="sig-arg">async</span>=<span class="sig-default">True</span>,
        <span class="sig-arg">cache_dir</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.push">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This is the place where data is either added to the write queue or 
  written to disk (if async == False) only and only if start() method has 
  been called.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>key</code></strong> (string) - cache data identifier</li>
        <li><strong class="pname"><code>data</code></strong> (any picklable object) - picklable object</li>
        <li><strong class="pname"><code>async</code></strong> (bool) - store cache asynchronously or not</li>
        <li><strong class="pname"><code>cache_dir</code></strong> (string) - alternative cache directory</li>
    </ul></dd>
    <dt>Returns: None</dt>
        <dd>None</dd>
  </dl>
</td></tr></table>
</div>
<a name="pop"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">pop</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">key</span>,
        <span class="sig-arg">cache_dir</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.pop">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>This is the place where data is retrieved from cache. You must know 
  the cache identifier used when push() was called.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>key</code></strong> (string) - cache data identifier</li>
        <li><strong class="pname"><code>cache_dir</code></strong> (string) - alternative cache directory</li>
    </ul></dd>
    <dt>Returns: Python object</dt>
        <dd>object stored into the stack or None (if stack is empty)</dd>
  </dl>
</td></tr></table>
</div>
<a name="clear_cache_item"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">clear_cache_item</span>(<span class="sig-arg">cache_item</span>,
        <span class="sig-arg">cache_dir</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.clear_cache_item">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Clear Entropy Cache item from on-disk cache.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>cache_item</code></strong> (string) - Entropy Cache item identifier</li>
        <li><strong class="pname"><code>cache_dir</code></strong> (string) - alternative cache directory</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="clear_cache"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">clear_cache</span>(<span class="sig-arg">excluded_items</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">cache_dir</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Static Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="entropy.cache-pysrc.html#EntropyCacher.clear_cache">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Clear all the on-disk cache items included in 
  EntropyCacher.CACHE_IDS.</p>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>excluded_items</code></strong> (list) - list of items to exclude from cleaning</li>
        <li><strong class="pname"><code>cache_dir</code></strong> (string) - alternative cache directory</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== CLASS VARIABLE DETAILS ==================== -->
<a name="section-ClassVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td align="left" colspan="2" class="table-header">
    <span class="table-header">Class Variable Details</span></td>
</tr>
</table>
<a name="CACHE_IDS"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">CACHE_IDS</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-group">{</code><code class="variable-quote">'</code><code class="variable-string">atom_match</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">atom_match/atom_match_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">check_package_update</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">check_update/package_update_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">critical_update</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">critical_update/critical_cache_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">db_match</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">match/db</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">dep_tree</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">deptree/dep_tree_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">depends_tree</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">depends/depends_tree_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">filter_satisfied_deps</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">depfilter/filter_satisfied_deps_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">library_breakage</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">libs_break/library_breakage_</code><code class="variable-quote">'</code><code class="variable-op">,</code>
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<a name="WRITEBACK_TIMEOUT"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">WRITEBACK_TIMEOUT</h3>
  <p>Entropy asynchronous and synchronous cache writer and reader. This 
  class is a Singleton and contains a thread doing the cache writes 
  asynchronously, thus it must be stopped before your application is 
  terminated calling the stop() method.</p>
  <p>Sample code:</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># import module</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-keyword">from</span> entropy.cache <span class="py-keyword">import</span> EntropyCacher
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># first EntropyCacher load, start it</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher = EntropyCacher()
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.start()
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># now store something into its cache</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.push(<span class="py-string">'my_identifier1'</span>, [1, 2, 3])
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># now store something synchronously</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.push(<span class="py-string">'my_identifier2'</span>, [1, 2, 3], async = False)
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># now flush all the caches to disk, and make sure all</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># is written</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.sync()
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># now fetch something from the cache</span>
<span class="py-prompt">&gt;&gt;&gt; </span>data = cacher.pop(<span class="py-string">'my_identifier1'</span>)
<span class="py-output">[1, 2, 3]</span>
<span class="py-output">...</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># now discard all the cached (async) writes</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.discard()
<span class="py-more">...</span>
<span class="py-prompt">&gt;&gt;&gt; </span><span class="py-comment"># and stop EntropyCacher</span>
<span class="py-prompt">&gt;&gt;&gt; </span>cacher.stop()</pre>
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
5
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="entropy-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.sabayon.org/">Entropy Framework</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Jul  1 07:15:36 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
